#ifndef PHYSIC_H
#define PHYSIC_H

#define dSINGLE
//#define dDOUBLE

#include <ode/ode.h>
#include <irrlicht.h>
#include <iostream>
#include <vector>

using namespace irr;
using namespace core;
using namespace scene;
using namespace video;
using namespace io;
using namespace gui;
using namespace std;

// Мир содержащий все тела
extern dWorldID ode_world;

// Указатель на геометрию пространства
extern dSpaceID ode_space;

// Указатель на контактные соединения группы
extern dJointGroupID ode_contactGroup;

// Переменная для поворота
extern vector3df ode_rotation;

// Структура для динамических объектов
struct ode_structObject
{
    ISceneNode* node;
    dBodyID body;
    dGeomID geom;
} extern ode_sObject;

// Список динамических объектов
extern vector<ode_structObject> ode_vObject;
extern vector<ode_structObject>::iterator ode_vObjectIter;

// Структура для игрока
struct ode_structPlayer
{
    ICameraSceneNode* playerCamera;
    ISceneNode* node;
    dBodyID playerBody;
    dGeomID playerGeom;
} extern ode_sPlayer;

// Создать мир
void ode_initOde();

// Обновить мир
void ode_updateWorld(f32 pTime);

// Удалить мир
void ode_deleteWorld();

// Функция вызывается когда два объекта могут столкнуться
void ode_callBack(void* pNode, dGeomID o1, dGeomID o2);

// Позиционирование тела
void ode_setPosition(dGeomID pGeom);

// Удалить объект
void ode_deleteObj(IMeshSceneNode* pNode);

// Создать квадратное тело
void ode_createBox(IMeshSceneNode* pNode, bool pStatic, f32 pMass);

// Создать круглое тело
void ode_createSphere(IMeshSceneNode* pNode, bool pStatic, f32 pMass);

// Создать произвольное тело
void ode_createTrg(IMeshSceneNode* pNode);

// Создать игрока
void ode_createPlayer(ISceneManager* smgr, vector3df pPosition);

// Обрабатывать игрока
void ode_controlPlayer();

#endif // PHYSIC_H
